@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* Compendus Design System */

@theme {
  /* Typography */
  --default-font-family: "Inter", system-ui, -apple-system, sans-serif;
  --default-mono-font-family: "JetBrains Mono", "SF Mono", ui-monospace, monospace;

  /* Primary Palette - Indigo */
  --color-primary: #4f46e5;
  --color-primary-hover: #4338ca;
  --color-primary-light: #eef2ff;
  --color-primary-muted: #a5b4fc;

  /* Secondary - Cyan/Teal */
  --color-secondary: #0891b2;
  --color-secondary-hover: #0e7490;
  --color-secondary-light: #ecfeff;

  /* Accent - Violet */
  --color-accent: #7c3aed;
  --color-accent-hover: #6d28d9;
  --color-accent-light: #f5f3ff;

  /* Semantic Colors */
  --color-success: #059669;
  --color-success-light: #ecfdf5;
  --color-warning: #d97706;
  --color-warning-light: #fffbeb;
  --color-danger: #dc2626;
  --color-danger-light: #fef2f2;

  /* Neutrals - Light Mode */
  --color-foreground: #0f172a;
  --color-foreground-muted: #64748b;
  --color-background: #f8fafc;
  --color-surface: #ffffff;
  --color-surface-elevated: #f1f5f9;

  /* Borders */
  --color-border: #e2e8f0;
  --color-border-hover: #cbd5e1;
  --color-border-active: #4f46e5;

  /* Paper Component */
  --color-paper-background: #ffffff;
  --color-paper-border: #e2e8f0;
  --shadow-paper: 0 4px 6px -1px rgba(15, 23, 42, 0.08), 0 2px 4px -2px rgba(15, 23, 42, 0.06);
  --shadow-paper-hover:
    0 10px 15px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -4px rgba(15, 23, 42, 0.08);

  /* Button Shadows */
  --shadow-btn: 0 1px 3px 0 rgba(15, 23, 42, 0.1), 0 1px 2px -1px rgba(15, 23, 42, 0.08);
  --shadow-btn-hover: 0 4px 6px -1px rgba(15, 23, 42, 0.1), 0 2px 4px -2px rgba(15, 23, 42, 0.08);
  --color-btn-border: #e2e8f0;

  /* Transitions */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Border Radius */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.5rem;
  --radius-full: 9999px;

  /* Animations */
  --animate-progress: progress 1s infinite linear;
  --animate-indeterminate-progress: indeterminate-progress 1.5s infinite ease-in-out;

  @keyframes progress {
    0% {
      transform: translateX(0) scaleX(0);
    }
    40% {
      transform: translateX(0) scaleX(0.4);
    }
    100% {
      transform: translateX(100%) scaleX(0.5);
    }
  }

  @keyframes indeterminate-progress {
    0% {
      transform: translateX(-100%);
      width: 40%;
    }
    50% {
      width: 60%;
    }
    100% {
      transform: translateX(250%);
      width: 40%;
    }
  }
}

/* Dark Mode - Cozy Evening Library */
.dark {
  --color-primary: #818cf8;
  --color-primary-hover: #a5b4fc;
  --color-primary-light: rgba(79, 70, 229, 0.15);
  --color-primary-muted: #6366f1;

  --color-secondary: #22d3ee;
  --color-secondary-hover: #67e8f9;
  --color-secondary-light: rgba(8, 145, 178, 0.15);

  --color-accent: #a78bfa;
  --color-accent-hover: #c4b5fd;
  --color-accent-light: rgba(124, 58, 237, 0.15);

  --color-success: #34d399;
  --color-success-light: rgba(5, 150, 105, 0.15);
  --color-warning: #fbbf24;
  --color-warning-light: rgba(217, 119, 6, 0.15);
  --color-danger: #f87171;
  --color-danger-light: rgba(220, 38, 38, 0.15);

  --color-foreground: #f1f5f9;
  --color-foreground-muted: #94a3b8;
  --color-background: #0c1222;
  --color-surface: #1a2332;
  --color-surface-elevated: #232f42;

  --color-border: #334155;
  --color-border-hover: #475569;
  --color-border-active: #818cf8;

  --color-paper-background: #1a2332;
  --color-paper-border: #334155;
  --shadow-paper: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.25);
  --shadow-paper-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.3);

  --shadow-btn: 0 1px 3px 0 rgba(0, 0, 0, 0.25), 0 1px 2px -1px rgba(0, 0, 0, 0.2);
  --shadow-btn-hover: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.25);
  --color-btn-border: #334155;
}

/* Base Styles */
@layer base {
  html {
    color-scheme: light;
  }

  html.dark {
    color-scheme: dark;
  }

  body {
    @apply bg-background text-foreground antialiased;
    transition:
      background-color var(--transition-base),
      color var(--transition-base);
  }

  * {
    @apply outline-primary;
  }
}

/* View Transitions */
@utility vt-name {
  view-transition-name: var(--vt-name);
}

@utility no-vt {
  view-transition-name: none;
}

@view-transition {
  navigation: auto;
}

/* Prose/Typography Overrides */
@layer utilities {
  .prose {
    :where(a):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
      @apply text-primary no-underline hover:underline;
    }

    :where(strong):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
      @apply text-foreground;
    }
  }
}

/* Reader text selection color matching the active theme */
.prose ::selection {
  background-color: var(--reader-selection-color, #c7d2fe);
}

/* Highlight marks applied to reader text */
.reader-highlight {
  cursor: pointer;
  transition: opacity 0.15s;
}
.reader-highlight:hover {
  opacity: 0.8;
}
