/* Compendus Design System - Cozy Evening Reading Room Aesthetic */

@theme {
  /* Typography */
  --default-font-family: "Inter", system-ui, -apple-system, sans-serif;
  --default-mono-font-family: "JetBrains Mono", "SF Mono", ui-monospace, monospace;

  /* Primary Palette - Indigo */
  --color-primary: #4f46e5;
  --color-primary-hover: #4338ca;
  --color-primary-light: #eef2ff;
  --color-primary-muted: #a5b4fc;

  /* Secondary - Cyan/Teal */
  --color-secondary: #0891b2;
  --color-secondary-hover: #0e7490;
  --color-secondary-light: #ecfeff;

  /* Accent - Violet */
  --color-accent: #7c3aed;
  --color-accent-hover: #6d28d9;
  --color-accent-light: #f5f3ff;

  /* Semantic Colors */
  --color-success: #059669;
  --color-success-light: #ecfdf5;
  --color-warning: #d97706;
  --color-warning-light: #fffbeb;
  --color-danger: #dc2626;
  --color-danger-light: #fef2f2;

  /* Neutrals - Light Mode */
  --color-foreground: #0f172a;
  --color-foreground-muted: #64748b;
  --color-background: #f8fafc;
  --color-surface: #ffffff;
  --color-surface-elevated: #f1f5f9;

  /* Borders */
  --color-border: #e2e8f0;
  --color-border-hover: #cbd5e1;
  --color-border-active: #4f46e5;

  /* Paper Component */
  --color-paper-background: #ffffff;
  --color-paper-border: #e2e8f0;
  --shadow-paper: 0 4px 6px -1px rgba(15, 23, 42, 0.08), 0 2px 4px -2px rgba(15, 23, 42, 0.06);
  --shadow-paper-hover:
    0 10px 15px -3px rgba(15, 23, 42, 0.1), 0 4px 6px -4px rgba(15, 23, 42, 0.08);

  /* Button Shadows */
  --shadow-btn: 0 1px 3px 0 rgba(15, 23, 42, 0.1), 0 1px 2px -1px rgba(15, 23, 42, 0.08);
  --shadow-btn-hover: 0 4px 6px -1px rgba(15, 23, 42, 0.1), 0 2px 4px -2px rgba(15, 23, 42, 0.08);
  --color-btn-border: #e2e8f0;


  /* Transitions */
  --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Border Radius */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;
  --radius-2xl: 1.5rem;
  --radius-full: 9999px;
}

/* Dark Mode - Cozy Evening Library */
.dark {
  --color-primary: #818cf8;
  --color-primary-hover: #a5b4fc;
  --color-primary-light: rgba(79, 70, 229, 0.15);
  --color-primary-muted: #6366f1;

  --color-secondary: #22d3ee;
  --color-secondary-hover: #67e8f9;
  --color-secondary-light: rgba(8, 145, 178, 0.15);

  --color-accent: #a78bfa;
  --color-accent-hover: #c4b5fd;
  --color-accent-light: rgba(124, 58, 237, 0.15);

  --color-success: #34d399;
  --color-success-light: rgba(5, 150, 105, 0.15);
  --color-warning: #fbbf24;
  --color-warning-light: rgba(217, 119, 6, 0.15);
  --color-danger: #f87171;
  --color-danger-light: rgba(220, 38, 38, 0.15);

  --color-foreground: #f1f5f9;
  --color-foreground-muted: #94a3b8;
  --color-background: #0c1222;
  --color-surface: #1a2332;
  --color-surface-elevated: #232f42;

  --color-border: #334155;
  --color-border-hover: #475569;
  --color-border-active: #818cf8;

  --color-paper-background: #1a2332;
  --color-paper-border: #334155;
  --shadow-paper: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.25);
  --shadow-paper-hover: 0 10px 15px -3px rgba(0, 0, 0, 0.4), 0 4px 6px -4px rgba(0, 0, 0, 0.3);

  --shadow-btn: 0 1px 3px 0 rgba(0, 0, 0, 0.25), 0 1px 2px -1px rgba(0, 0, 0, 0.2);
  --shadow-btn-hover: 0 4px 6px -1px rgba(0, 0, 0, 0.3), 0 2px 4px -2px rgba(0, 0, 0, 0.25);
  --color-btn-border: #334155;
}

/* ============================================
   UTILITY CLASSES
   ============================================ */

/* Paper/Card Component */
@utility paper {
  @apply bg-paper-background border border-paper-border rounded-xl p-6;
  box-shadow: var(--shadow-paper);
  transition:
    box-shadow var(--transition-base),
    transform var(--transition-base);
}

@utility paper-hover {
  @apply paper;
  &:hover {
    box-shadow: var(--shadow-paper-hover);
    transform: translateY(-2px);
  }
}

@utility paper-border {
  @apply border border-paper-border rounded-xl;
}

/* Breadcrumbs */
@utility breadcrumbs {
  @apply flex flex-wrap gap-2 text-sm;
  & > * {
    @apply inline-flex items-center after:content-[""] not-last:after:ml-2 not-last:after:text-foreground-muted not-last:after:content-["/"];
  }
  & > a {
    @apply text-primary hover:text-primary-hover transition-colors;
  }
}

/* ============================================
   BUTTONS
   ============================================ */

@utility btn {
  @apply inline-flex items-center justify-center gap-2 cursor-pointer;
  @apply bg-surface border border-btn-border rounded-lg;
  @apply px-4 py-2.5 text-sm font-medium;
  @apply text-foreground;
  box-shadow: var(--shadow-btn);
  transition: all var(--transition-fast);

  &:hover {
    box-shadow: var(--shadow-btn-hover);
    transform: translateY(-1px);
    @apply border-border-hover;
  }

  &:active {
    transform: translateY(0);
    box-shadow: none;
  }

  &:focus-visible {
    @apply outline-2 outline-offset-2 outline-primary;
  }

  &:disabled {
    @apply opacity-50 cursor-not-allowed;
    transform: none;
    box-shadow: none;
  }

  &.btn-icon {
    @apply aspect-square p-2.5;
    & img,
    & svg {
      @apply h-5 w-5;
    }
  }
}

/* Button Color Variants */
@utility btn-primary {
  @apply bg-primary text-white border-primary;
  &:hover {
    @apply bg-primary-hover border-primary-hover;
  }
}

@utility btn-secondary {
  @apply border-secondary text-secondary;
  &:hover {
    @apply bg-secondary text-white;
  }
}

@utility btn-success {
  @apply border-success text-success;
  &:hover {
    @apply bg-success text-white;
  }
}

@utility btn-warning {
  @apply border-warning text-warning;
  &:hover {
    @apply bg-warning text-white;
  }
}

@utility btn-danger {
  @apply border-danger text-white bg-danger;
  &:hover {
    @apply bg-danger/90;
  }
}

@utility btn-ghost {
  @apply bg-transparent border-transparent shadow-none;
  &:hover {
    @apply bg-surface-elevated shadow-none;
    transform: none;
  }
}

@utility btn-sm {
  @apply px-3 py-1.5 text-sm;
}

@utility btn-lg {
  @apply px-6 py-3 text-base;
}

/* ============================================
   FORM ELEMENTS
   ============================================ */

@utility label {
  @apply mb-1.5 block text-sm font-medium text-foreground;
}

@utility input {
  @apply w-full px-4 py-2.5 rounded-lg;
  @apply bg-surface border border-border;
  @apply text-foreground placeholder:text-foreground-muted;
  transition:
    border-color var(--transition-fast),
    box-shadow var(--transition-fast);

  &:focus {
    @apply border-primary outline-none;
    box-shadow: 0 0 0 3px var(--color-primary-light);
  }

  &:disabled {
    @apply bg-surface-elevated opacity-60 cursor-not-allowed;
  }
}

@utility checkbox {
  @apply h-5 w-5 rounded border border-border bg-surface;
  @apply accent-primary;
  transition: border-color var(--transition-fast);

  &:focus {
    @apply border-primary outline-none;
    box-shadow: 0 0 0 3px var(--color-primary-light);
  }

  &:disabled {
    @apply opacity-60 cursor-not-allowed;
  }
}

@utility select {
  @apply w-full px-4 py-2.5 rounded-lg appearance-none;
  @apply bg-surface border border-border;
  @apply text-foreground;
  background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%2364748b' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
  background-position: right 0.75rem center;
  background-repeat: no-repeat;
  background-size: 1.25rem;
  padding-right: 2.5rem;
  transition:
    border-color var(--transition-fast),
    box-shadow var(--transition-fast);

  &:focus {
    @apply border-primary outline-none;
    box-shadow: 0 0 0 3px var(--color-primary-light);
  }

  &:disabled {
    @apply bg-surface-elevated opacity-60 cursor-not-allowed;
  }
}

/* ============================================
   BASE STYLES
   ============================================ */

@layer base {
  html {
    color-scheme: light;
  }

  html.dark {
    color-scheme: dark;
  }

  body {
    @apply bg-background text-foreground antialiased;
    transition:
      background-color var(--transition-base),
      color var(--transition-base);
  }

  * {
    @apply outline-primary;
  }
}

/* ============================================
   BADGES & STATUS INDICATORS
   ============================================ */

@utility badge {
  @apply inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium;
}

@utility badge-primary {
  @apply bg-primary-light text-primary border border-primary/20;
}

@utility badge-success {
  @apply bg-success-light text-success border border-success/20;
}

@utility badge-warning {
  @apply bg-warning-light text-warning border border-warning/20;
}

@utility badge-danger {
  @apply bg-danger-light text-danger border border-danger/20;
}

@utility badge-secondary {
  @apply bg-secondary-light text-secondary border border-secondary/20;
}

@utility badge-accent {
  @apply bg-accent-light text-accent border border-accent/20;
}

@utility badge-neutral {
  @apply bg-surface-elevated text-foreground-muted border border-border;
}

/* ============================================
   ALERTS & MESSAGES
   ============================================ */

@utility alert {
  @apply p-4 rounded-lg border;
}

@utility alert-success {
  @apply bg-success-light text-success border-success/20;
}

@utility alert-warning {
  @apply bg-warning-light text-warning border-warning/20;
}

@utility alert-danger {
  @apply bg-danger-light text-danger border-danger/20;
}

@utility alert-info {
  @apply bg-primary-light text-primary border-primary/20;
}

/* ============================================
   READER COMPONENTS
   ============================================ */

@utility reader-container {
  @apply bg-surface text-foreground;
}

@utility reader-toolbar {
  @apply bg-surface-elevated border-b border-border;
}

@utility reader-button {
  @apply bg-surface border border-border text-foreground hover:bg-surface-elevated transition-colors;
}

@utility reader-sidebar {
  @apply bg-surface-elevated border-r border-border;
}

/* ============================================
   CODE BLOCKS
   ============================================ */

@utility code-block {
  @apply bg-surface-elevated text-foreground p-4 rounded-lg overflow-x-auto text-sm font-mono border border-border;
}

/* ============================================
   PROSE/TYPOGRAPHY OVERRIDES
   ============================================ */

@layer utilities {
  .prose {
    :where(a):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
      @apply text-primary no-underline hover:underline;
    }

    :where(strong):not(:where([class~="not-prose"], [class~="not-prose"] *)) {
      @apply text-foreground;
    }
  }
}
